type TX {
  id: ID!
  block: Int!
  timestamp: Int!
  hash: String!
  chainId: Int!
  from: String!
}

type Role {
  id: ID!
  chainId: Int!
  roleHash: String!
  beamPool: BeamPool
  beamR: BeamR!
  admins: [String!]!
}

type BeamR {
  id: ID!
  chainId: Int!
  beamPools: [BeamPool!]! @derivedFrom(field: "beamR")
  adminRole: Role!
  rootAdminRole: Role!
  beams: [Beam!]! @derivedFrom(field: "beamR")
}

type BeamPool {
  id: ID!
  chainId: Int!
  beamR: BeamR!
  creator: User!
  token: String!
  beams: [Beam!]! @derivedFrom(field: "beamPool")
  beamCount: Int!
  totalUnits: BigInt!
  flowRate: BigInt!
  lastUpdated: Int!
  poolAdminRole: Role!
  metadata: PoolMetadata!
  lastDistroUpdate: DistributionUpdated
  distributionUpdates: [DistributionUpdated!]! @derivedFrom(field: "beamPool")
  memberUnitsUpdated: [MemberUnitsUpdated!]! @derivedFrom(field: "beamPool")
}

type PoolMetadata {
  id: ID!
  creatorFID: Int!
  poolType: Int!
  name: String!
  description: String
  castHash: String
  instructions: String
}

type Beam {
  id: ID!
  chainId: Int!
  from: User!
  to: User!
  beamPool: BeamPool!
  units: BigInt!
  isReceiverConnected: Boolean!
  beamR: BeamR!
  memberUnitsUpdated: [MemberUnitsUpdated!]! @derivedFrom(field: "beam")
}

type User {
  id: ID!
  chainId: Int!
  address: String!
  fid: Int
  beamPools: [BeamPool!]! @derivedFrom(field: "creator")
  incoming: [Beam!]! @derivedFrom(field: "to")
  outgoing: [Beam!]! @derivedFrom(field: "from")
}

type TokenMetric {
  id: ID!
  chainId: Int!
  address: String!
  amountBeamed: BigInt!
  vanityMetrics: VanityMetrics!
}

type VanityMetrics {
  id: ID!
  users: Int!
  beamPools: Int!
  beams: Int!
  TokenMetrics: [TokenMetric!]! @derivedFrom(field: "vanityMetrics")
}

# Raw Events for SuperfluidPool Contract (filtered by BeamR specific pools only)

type MemberUnitsUpdated {
  id: ID!
  beamPool: BeamPool!
  beam: Beam!
  member: String!
  oldUnits: BigInt!
  newUnits: BigInt!
}

# Raw Events for GDA Contract (filtered by BeamR specific pools only)

type DistributionUpdated {
  id: ID!
  beamPool: BeamPool!
  distributor: String!
  oldFlowRate: BigInt!
  newFlowRateFromDistributor: BigInt!
  newTotalFlowRate: BigInt!
}

# Raw Events for BeamR Contract

type BeamR_Initialized {
  id: ID!
  adminRole: String!
  rootAdminRole: String!
  tx: TX!
}

type BeamR_PoolCreated {
  id: ID!
  pool: String!
  token: String!
  config_0: Boolean!
  config_1: Boolean!
  creator: String!
  poolAdminRole: String!
  metadata_0: BigInt!
  metadata_1: String!
  tx: TX!
}

type BeamR_PoolMetadataUpdated {
  id: ID!
  pool: String!
  metadata_0: BigInt!
  metadata_1: String!
  tx: TX!
}

type BeamR_RoleAdminChanged {
  id: ID!
  role: String!
  previousAdminRole: String!
  newAdminRole: String!
  tx: TX!
}

type BeamR_RoleGranted {
  id: ID!
  role: String!
  account: String!
  sender: String!
  tx: TX!
}

type BeamR_RoleRevoked {
  id: ID!
  role: String!
  account: String!
  sender: String!
  tx: TX!
}
